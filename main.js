(()=>{"use strict";class t{static EDITABLE_PROPERTIES=["title","description","notes","tags"];constructor(t,e="",n="",c=[],o=null){this._type="project",this.id=o??crypto.randomUUID(),this.title=t,this.description=e,this.notes=n,this.tags=c}updateProject(t,e){for(const n in e)PROJECT_PROPERTIES.includes(n)&&(projects[t][n]=e[n])}static projectFromJSON(e){return new t(e.title,e.description,e.notes,e.tags,e.id)}static retrieveValidProperties(){return this.EDITABLE_PROPERTIES}}class e{static EDITABLE_PROPERTIES=["project","title","description","dueDate","priority","checklist","notes","tags"];constructor(t,e="",n="",c=0,o=[],i="",r=[],s=0,a=null){this._type="task",this.complete=!1,this.id=a??crypto.randomUUID(),this.projectId=s,this.title=t,this.description=e,this.dueDate=n,this.priority=c,this.checklist=o,this.notes=i,this.tags=r}updateTask(t){for(const e in t)EDITABLE_PROPERTIES.includes(e)&&(todos[id][e]=t[e])}static taskFromJSON(t){return new e(t.title,t.description,t.dueDate,t.priority,t.checklist,t.notes,t.tags,t.projectId,t.id)}static retrieveValidProperties(){return this.EDITABLE_PROPERTIES}}let n=[],c=[],o=!1;const i=function(t){o&&localStorage.setItem("active",t)},r=function(){let e=JSON.parse(localStorage.getItem("projects"));return e&&(e=e.map(e=>t.projectFromJSON(e)),n=e),n},s=function(){let t=JSON.parse(localStorage.getItem("tasks"));return t&&(t=t.map(t=>e.taskFromJSON(t)),c=t),c},a=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("icon",`icon-${t}`);const n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#icon-${t}`),e.appendChild(n),e},l=document.querySelector(".todo-list"),d=document.querySelector(".project-container"),p=function(t){let e=document.createElement("li");e.setAttribute("data-id",t.projectId),e.classList.add("task");let n=document.createElement("h3");n.textContent=t.title;const c=document.createElement("div");c.classList.add("icon-circle-with-check"),c.innerHTML='<svg class="icon icon-circle-with-check" viewBox="0 0 32 32" width="100%" height="100%">\n        <path d="M16 26.667c-5.891 0-10.667-4.776-10.667-10.667v0c0-5.891 4.776-10.667 10.667-10.667v0c5.891 0 10.667 4.776 10.667 10.667v0c0 5.891-4.776 10.667-10.667 10.667v0zM16 2.667c-7.364 0-13.333 5.97-13.333 13.333v0c0 7.364 5.97 13.333 13.333 13.333v0c7.364 0 13.333-5.97 13.333-13.333v0c0-7.364-5.97-13.333-13.333-13.333v0z"></path>\n        <path class="inner-check" d="M23 11.333l-8 8-3.667-3.667 0.94-0.94 2.727 2.72 7.06-7.053 0.94 0.94z"></path>\n      </svg>';const o=document.createElement("div");o.appendChild(c),o.appendChild(n),o.classList.add("task-info");const i=document.createElement("div"),r=a("pencil"),s=a("trash-can-outline");i.appendChild(r),i.appendChild(s),i.classList.add("task-utils"),e.appendChild(o),e.appendChild(i),l.appendChild(e)},u=function(t){l.innerHTML="";for(let e of t)p(e)},h=function(t){d.innerHTML="",d.setAttribute("data-id",t.id);const e=document.createElement("h3");e.textContent=t.title;const n=a("icon-circle-outline");d.appendChild(n),d.appendChild(e)},m=document.querySelector(".sidebar-project-list"),E=t=>{m.innerHTML="",t.forEach(t=>{const e=document.createElement("li");e.dataset.projectId=t.id,e.classList.add("project-tab");const n=a("icon-circle-outline"),c=document.createElement("h3");c.textContent=t.title,e.appendChild(n),e.appendChild(c),m.appendChild(e)})};let g;const f=function(t,e,n){const c=t.querySelector(".cancel-btn"),o=t.querySelector(".save-btn");c.addEventListener("click",()=>{e()}),o.addEventListener("click",t=>{t.preventDefault(),n(),e()})},S=function(e){const c=new t(e.title,e.description,e.notes,e.tags);var i;i=c,n.push(i),o&&localStorage.setItem("projects",JSON.stringify(n)),h(c),E(r())},v=function(t){var n;n=new e(t.title,t.description,t.dueDate,t.priority,t.checkList,t.notes,t.tags,t.projectId),c.push(n),o&&localStorage.setItem("tasks",JSON.stringify(c))},w=function(t){return s().filter(e=>e.projectId===t)};(function(){let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),o=!0,!0}catch(e){return e instanceof DOMException&&"QuotaExceededError"===e.name&&t&&0!==t.length}})()&&(c=s()??[],n=r()??[]),function(){const t=document.querySelector("#project-dialog"),e=document.querySelector("#task-dialog");document.querySelector("#edit-modal"),document.querySelector(".sidebar-top").addEventListener("click",t=>{if(t.target.matches(".add-task")){const t=r(),n=e.querySelector("#project-select");n.innerHTML="",t.forEach(t=>{const e=function(t,e){const n=document.createElement("option");return n.value=e,n.textContent=t,n}(t.title,t.id);n.appendChild(e)}),e.showModal()}else if(t.target.matches(".view-all")){const t=s();l.innerHTML="",d.innerHTML="",function(){const t=document.createElement("h3");t.textContent="All Tasks",d.appendChild(t)}(),u(t)}else(t.target.matches(".calendar-today")||t.target.matches(".calendar-week")||t.target.matches(".calendar-month"))&&e.showModal()}),document.querySelector(".add-project").addEventListener("click",()=>{t.showModal()})}(),document.querySelectorAll("form").forEach(t=>{t.parentElement.matches("#project-dialog")?f(t,()=>t.parentElement.close(),()=>S(Object.fromEntries(new FormData(t)))):t.parentElement.matches("#task-dialog")?f(t,()=>t.parentElement.close(),()=>v(Object.fromEntries(new FormData(t)))):t.parentElement.matches("#edit-modal")&&f(t,()=>t.parentElement.close(),()=>S(Object.fromEntries(new FormData(t))))}),m.addEventListener("click",t=>{if(t.target.matches(".project-tab")){const e=t.target.dataset.projectId,n=r().find(t=>t.id===e);h(n),i(n.id),u(w(n.id))}}),function(){if(0===r().length){const e=new t("Default","","","");g=e,i(e.id)}else g||(g=function(){console.log(localStorage.getItem("active"));let t=localStorage.getItem("active");return t?n.find(e=>e.id===t):n.length>0?n[0]:null}());E(r()),h(g),u(w(g.id))}()})();
//# sourceMappingURL=main.js.map